# 10 Exercises: EFC Introduction

## 10.1 Getting started

For our first exercise, lets start with a pretty simple example.

![alt text](Images/image.png)

We want to end up with a database, generated by EFC, based on our entities.

That is, we don't want to write any SQL ourselves, everything database related should be handled by EFC.

**Objective:**  
Get familiar with EFC, and how a "code first" approach can be used to generate a database.

**Task:**  
Implement the above diagram using EFC.

**Steps:**

1. Create a new solution
2. Create a new CLI project
3. Follow the [installation guide](https://troelsmortensen.github.io/CodeLabs/Tutorials/EfcSetupIntro/Page.html)
4. Create entities
5. Configure relationships
6. Create/Setup PKs
7. Generate migration
8. Create database

<blockquote>
<details>
<summary>Display solution...</summary>
<p>

```csharp
public class Child
{
    public string Name { get; set; }
    
    public Employee Employee { get; set; }
}
```

```csharp
public class Employee
{
    
    public int SSN { get; set; }
    public double Salary { get; set; }
    public string Phone_number { get; set; }
    
    public Department Department { get; set; }
}
```

```csharp
using EFC_Example.Entities;
using Microsoft.EntityFrameworkCore;

public class AppContext : DbContext
{
    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        optionsBuilder.UseSqlite("Data Source=EFC_Example.db");
    }
    
    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Child>().HasKey(c => c.Name);
        modelBuilder.Entity<Employee>().HasKey(e => e.SSN);
        modelBuilder.Entity<Department>().HasKey(d => d.Code);
    }
}
```

</p>
</details>
</blockquote>

## 10.2 Simple Library

Here is another diagram, with a relationship attribute

![alt text](Images/image8.png)

**Objective:**  
Understand how relationship attributes can be implemented.

**Task:**  
Implement the above diagram using EFC.

**Steps:**

1. Create a new CLI project
2. Create entities
3. Configure relationships
4. Create/Setup PKs
5. Generate migration
6. Create database

<blockquote>
<details>
<summary>Display solution...</summary>
<p>






</p>
</details>
</blockquote>

## 10.3 Migrations

Another diagram, this time in two parts

![alt text](Images/image-2.png)

**Objective:**  
Get familiar with migrations, and how we can evolve our database, as we implement more entities.

**Task:**  
Implement the above diagram using EFC.

**Steps:**

1. Create a new CLI project
2. Create entities
3. Configure relationships
4. Create/Setup PKs
5. Generate migration
6. Create database
7. Expand on your solution by implementing the following diagram, and generate migrations and update

![alt text](Images/image-3.png)

<blockquote>
<details>
<summary>Display solution...</summary>
<p>

</p>
</details>
</blockquote>

## 10.4 Advanced example

This diagram contains a bit of everything

![alt text](Images/image-4.png)

**Objective:**  
Challenge yourself by implementing a larger scale system.

**Task:**  
Implement the above diagram using EFC.
You could try to generate parts of the diagram, bit by bit, or everything in one go.

**Steps:**

1. Create a new CLI project
2. Create entities
3. Configure relationships
4. Create/Setup PKs
5. Generate migration
6. Create database

<blockquote>
<details>
<summary>Display solution...</summary>
<p>

</p>
</details>
</blockquote>
